{"version":3,"file":"js/25.64fb9069.js","mappings":"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","sources":["webpack://DOUJI.AI/./src/views/Update.vue","webpack://DOUJI.AI/./src/components/create/UpdateSuccessDialog.vue","webpack://DOUJI.AI/src/components/create/UpdateSuccessDialog.vue","webpack://DOUJI.AI/./src/components/create/UpdateSuccessDialog.vue?d68b","webpack://DOUJI.AI/./src/components/create/UpdateSuccessDialog.vue?b224","webpack://DOUJI.AI/src/views/Update.vue","webpack://DOUJI.AI/./src/views/Update.vue?1854","webpack://DOUJI.AI/./src/views/Update.vue?7d16"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"create-container\"},[(_vm.loadComplete)?[(_vm.step==1)?_c('create-step1',{attrs:{\"edit\":true,\"metadata\":_vm.metadata},on:{\"handleUpdate\":_vm.handleUpdate1,\"backClick\":_vm.backClick}}):_vm._e(),(_vm.step==2)?_c('create-step2',{attrs:{\"edit\":true,\"metadata\":_vm.metadata},on:{\"handleUpdate\":_vm.handleUpdate2,\"backClick\":_vm.backClick}}):_vm._e(),_c('UpdateSuccess',{ref:\"successDialog\",attrs:{\"tx\":_vm.updateTxJson}})]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"custom-class\":\"mint-success-dialog\",\"visible\":_vm.show,\"width\":\"945px\"},on:{\"update:visible\":function($event){_vm.show=$event}}},[_c('img',{staticStyle:{\"width\":\"104px\",\"height\":\"104px\",\"margin-top\":\"85px\"},attrs:{\"src\":require(\"@/assets/images/create/mint-success.png\")}}),_c('div',{staticClass:\"mint-success-title\"},[_vm._v(\"Congratulations\")]),_c('div',{staticClass:\"mint-success-label text-color\"},[_vm._v(\"You have successfully initiated a vote to amend the NFT profile!\")]),_c('div',{staticClass:\"mint-success-info\"},[_c('div',{staticClass:\"info-label\"},[_c('div',{staticClass:\"info-label-item\"},[_vm._v(\"Transcantion ID\")])]),(_vm.tx.events)?_c('div',{staticClass:\"info-value\"},[_c('div',{staticClass:\"info-value-item\"},[_vm._v(_vm._s(_vm.tx.transactionHash))])]):_vm._e()]),_c('div',{staticClass:\"btn-container\"},[_c('el-button',{staticClass:\"common-btn2\"},[_vm._v(\"View NFT\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog custom-class=\"mint-success-dialog\" :visible.sync=\"show\" width=\"945px\">\r\n    <img style=\"width: 104px;height: 104px;margin-top: 85px;\" src=\"@/assets/images/create/mint-success.png\" />\r\n    <div class=\"mint-success-title\">Congratulations</div>\r\n    <div class=\"mint-success-label text-color\">You have successfully initiated a vote to amend the NFT profile!</div>\r\n    <div class=\"mint-success-info\">\r\n      <div class=\"info-label\">\r\n        <div class=\"info-label-item\">Transcantion ID</div>\r\n      </div>\r\n      <div class=\"info-value\" v-if=\"tx.events\">\r\n        <div class=\"info-value-item\">{{ tx.transactionHash }}</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"btn-container\">\r\n      <el-button class=\"common-btn2\">View NFT</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'update-success-dialog',\r\n  props: {\r\n    tx: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          transactionHash: undefined,\r\n          to: undefined,\r\n          events: {\r\n            Authorised: {\r\n              returnValues: {\r\n                tokenId: undefined,\r\n              },\r\n            },\r\n          },\r\n        }\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n    }\r\n  },\r\n  methods: {\r\n    showDialog() {\r\n      this.show = true\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.mint-success-dialog {\r\n  background: #1a2027;\r\n  border: 1px solid #2c3638;\r\n  border-radius: 12px 6px 6px 6px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  .mint-success-title {\r\n    font-size: 30px;\r\n    font-family: Arial;\r\n    font-weight: bold;\r\n    color: #00f9e5;\r\n    margin-top: 35px;\r\n  }\r\n\r\n  .mint-success-label {\r\n    font-size: 18px;\r\n    font-family: Arial;\r\n    font-weight: bold;\r\n    margin-top: 23px;\r\n  }\r\n\r\n  .mint-success-info {\r\n    background: #212831;\r\n    border-radius: 15px;\r\n    padding: 48px 0 51px 0;\r\n    margin-top: 56px;\r\n    width: 848px;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: center;\r\n\r\n    .info-label {\r\n      text-align: left;\r\n\r\n      .info-label-item {\r\n        font-size: 14px;\r\n        font-family: Arial;\r\n        font-weight: 400;\r\n        color: #87a2b7;\r\n        margin-bottom: 22px;\r\n\r\n        &:last-child {\r\n          margin-bottom: 0;\r\n        }\r\n      }\r\n    }\r\n\r\n    .info-value {\r\n      text-align: left;\r\n      margin-left: 41px;\r\n\r\n      .info-value-item {\r\n        font-size: 14px;\r\n        font-family: Arial;\r\n        font-weight: bold;\r\n        color: #ffffff;\r\n        margin-bottom: 22px;\r\n\r\n        &:last-child {\r\n          margin-bottom: 0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .btn-container {\r\n    margin: 49px 0 70px 0;\r\n  }\r\n\r\n  .el-dialog {\r\n    background: #1a2027;\r\n    border: 1px solid #2c3638;\r\n    border-radius: 12px 6px 6px 6px;\r\n  }\r\n\r\n  .el-dialog__body {\r\n    padding: 0 0;\r\n  }\r\n\r\n  .el-switch.is-checked .el-switch__core {\r\n    border-color: #00f9e5;\r\n    background-color: #00f9e5;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UpdateSuccessDialog.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UpdateSuccessDialog.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UpdateSuccessDialog.vue?vue&type=template&id=631184cc\"\nimport script from \"./UpdateSuccessDialog.vue?vue&type=script&lang=js\"\nexport * from \"./UpdateSuccessDialog.vue?vue&type=script&lang=js\"\nimport style0 from \"./UpdateSuccessDialog.vue?vue&type=style&index=0&id=631184cc&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"create-container\">\r\n    <template v-if=\"loadComplete\">\r\n      <create-step1 v-if=\"step==1\" :edit=\"true\" :metadata=\"metadata\" @handleUpdate=\"handleUpdate1\" @backClick=\"backClick\"></create-step1>\r\n      <create-step2 v-if=\"step==2\" :edit=\"true\" :metadata=\"metadata\" @handleUpdate=\"handleUpdate2\" @backClick=\"backClick\"></create-step2>\r\n      <UpdateSuccess ref=\"successDialog\" :tx=\"updateTxJson\" />\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CreateStep1 from '@/components/create/CreateStep1'\r\nimport CreateStep2 from '@/components/create/CreateStep2'\r\nimport UpdateSuccess from '@/components/create/UpdateSuccessDialog'\r\nimport { weiToMbd } from '@/utils/common'\r\nimport { loadFromUrl, unlockContent, uploadJson } from '@/utils/http'\r\nimport {\r\n  getTokenOwner,\r\n  startSetTokenPrice,\r\n  startSetTokenURI,\r\n  tokenURI,\r\n  tokensData,\r\n} from '@/utils/web3/nft'\r\nexport default {\r\n  name: 'update-view',\r\n  components: {\r\n    CreateStep1,\r\n    CreateStep2,\r\n    UpdateSuccess,\r\n  },\r\n  data() {\r\n    return {\r\n      loadComplete: false,\r\n      metadata: {},\r\n      ipfsData: {},\r\n      step: 0,\r\n      tokenId: undefined,\r\n      tokenSupplyInfo: {},\r\n      tokenMetaUrl: undefined,\r\n      tokenOwner: undefined,\r\n      updateTxJson: {},\r\n    }\r\n  },\r\n  mounted() {\r\n    this.tokenId = this.$route.query.tokenId\r\n    this.step = this.$route.query.step\r\n    var loadingInstance = this.$loading({\r\n      background: 'rgba(0, 0, 0, 0.8)',\r\n    })\r\n    setTimeout(() => {\r\n      Promise.all([this.getOwner(), this.loadSupplyInfo(), this.loadMetadata()])\r\n        .then(() => {\r\n          if (this.tokenSupplyInfo.isVoting) {\r\n            this.$toast.warning(this.$t('create.nft_voting'))\r\n            this.$router.back()\r\n            return\r\n          }\r\n          if (\r\n            this.tokenOwner.toLowerCase() !=\r\n            this.$store.state.user.account.toLowerCase()\r\n          ) {\r\n            this.$toast.warning(this.$t('create.no_permission_update'))\r\n            this.$router.back()\r\n            return\r\n          }\r\n          this.metadata.maxSupply = this.tokenSupplyInfo.maxSupply\r\n          this.metadata.initialQuantity = this.tokenSupplyInfo.currentSupply\r\n          this.metadata.availableSupply = this.tokenSupplyInfo.availableSupply\r\n          this.metadata.initialPrice = weiToMbd(\r\n            this.tokenSupplyInfo.price.price\r\n          )\r\n          this.loadComplete = true\r\n        })\r\n        .catch((e) => {\r\n          console.log(e)\r\n        })\r\n        .finally(() => {\r\n          loadingInstance.close()\r\n        })\r\n    }, 4000)\r\n  },\r\n  methods: {\r\n    /** 页面后退 */\r\n    backClick() {\r\n      this.$router.back()\r\n    },\r\n    /** 获取token拥有者 */\r\n    getOwner() {\r\n      return new Promise((resolve, reject) => {\r\n        if (!this.tokenId) {\r\n          reject()\r\n        }\r\n        getTokenOwner(this.tokenId)\r\n          .then((owner) => {\r\n            this.tokenOwner = owner\r\n            resolve()\r\n          })\r\n          .catch(() => {\r\n            reject()\r\n          })\r\n      })\r\n    },\r\n    /** 加载数据 */\r\n    loadSupplyInfo() {\r\n      return new Promise((resolve, reject) => {\r\n        if (!this.tokenId) {\r\n          reject()\r\n        }\r\n        tokensData(this.tokenId)\r\n          .then((res) => {\r\n            this.tokenSupplyInfo = res\r\n            resolve()\r\n          })\r\n          .catch(() => {\r\n            reject()\r\n          })\r\n      })\r\n    },\r\n    /** 加载元数据 */\r\n    loadMetadata() {\r\n      return new Promise((resolve, reject) => {\r\n        if (!this.tokenId) {\r\n          reject()\r\n        }\r\n        tokenURI(this.tokenId)\r\n          .then((uri) => {\r\n            this.tokenMetaUrl = uri\r\n            loadFromUrl(this.tokenMetaUrl).then((r) => {\r\n              if (r.status !== 200) {\r\n                reject(r.statusText)\r\n              }\r\n              var meta = r.data\r\n              this.ipfsData = meta\r\n              this.metadata.title = meta.title\r\n              this.metadata.description = meta.description\r\n              this.metadata.image = meta.image\r\n              this.metadata.contentType = meta.contentType\r\n              this.metadata.category = meta.category\r\n              this.metadata.contentUrl = meta.contentUrl\r\n              this.metadata.protected = meta.protected\r\n              this.metadata.language = meta.language\r\n              this.metadata.prompt = meta.prompt\r\n              this.metadata.keyword = meta.keyword ? meta.keyword : []\r\n              if (this.metadata.contentUrl && this.step == 2) {\r\n                return Promise.all([\r\n                  this.loadOpenContent(this.metadata.contentUrl),\r\n                  this.loadProtectedContent(this.metadata.protected),\r\n                ])\r\n                  .then(([openContent, protectedContent]) => {\r\n                    this.metadata.openContent = openContent\r\n                    this.metadata.protectedContent = protectedContent\r\n                    resolve()\r\n                  })\r\n                  .catch((e) => {\r\n                    reject(e)\r\n                  })\r\n              }\r\n              resolve()\r\n            })\r\n          })\r\n          .catch(() => {\r\n            reject()\r\n          })\r\n      })\r\n    },\r\n    /** 加载公开数据 */\r\n    loadOpenContent(url) {\r\n      return new Promise((resolve, reject) => {\r\n        loadFromUrl(url).then((res) => {\r\n          if (res.status !== 200) {\r\n            reject(res.statusText)\r\n          }\r\n          resolve(res.data)\r\n        })\r\n      })\r\n    },\r\n    /** 加载私有数据 */\r\n    loadProtectedContent(data) {\r\n      return new Promise((resolve, reject) => {\r\n        unlockContent(data, this.tokenId).then((res) => {\r\n          if (res.code != 1) {\r\n            reject(res.message)\r\n          }\r\n          const ipfsUrl = res.data.url\r\n          loadFromUrl(ipfsUrl).then((r) => {\r\n            if (r.status !== 200) {\r\n              reject(r.statusText)\r\n            }\r\n            resolve(r.data)\r\n          })\r\n        })\r\n      })\r\n    },\r\n    /** 更新1 */\r\n    handleUpdate1(form) {\r\n      const initialPriceUpdate = form.initialPrice\r\n      const availableSupplyUpdate = form.availableSupply\r\n      var loadingInstance = this.$loading({\r\n        background: 'rgba(0, 0, 0, 0.8)',\r\n      })\r\n      startSetTokenPrice(\r\n        this.tokenId,\r\n        initialPriceUpdate,\r\n        availableSupplyUpdate\r\n      )\r\n        .then((tx) => {\r\n          console.log(tx)\r\n          this.updateTxJson = tx\r\n          this.$refs['successDialog'].showDialog()\r\n        })\r\n        .catch((e) => {\r\n          this.$toast.warning(e)\r\n        })\r\n        .finally(() => {\r\n          loadingInstance.close()\r\n        })\r\n    },\r\n    /** 更新2 */\r\n    handleUpdate2(form) {\r\n      const metaJson = this.makeURI(form)\r\n      console.log(metaJson)\r\n      var loadingInstance = this.$loading({\r\n        background: 'rgba(0, 0, 0, 0.8)',\r\n      })\r\n      uploadJson(metaJson)\r\n        .then((r) => {\r\n          if (r.code == 1) {\r\n            const metaUrl = r.data.url\r\n            startSetTokenURI(this.tokenId, metaUrl)\r\n              .then((tx) => {\r\n                console.log(tx)\r\n                this.updateTxJson = tx\r\n                this.$refs['successDialog'].showDialog()\r\n              })\r\n              .catch((e) => {\r\n                this.$toast.warning(e)\r\n              })\r\n              .finally(() => {\r\n                loadingInstance.close()\r\n              })\r\n          } else {\r\n            this.$toast.warning(r.message)\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.$toast.warning(e)\r\n        })\r\n    },\r\n    /** 生成URI */\r\n    makeURI(form) {\r\n      const metaJson = {\r\n        title: form.title,\r\n        name: form.title,\r\n        image: form.image,\r\n        maxSupply: form.maxSupply,\r\n        description: form.description,\r\n        contentType: form.contentType,\r\n        category: form.category,\r\n        keyword: form.keyword,\r\n        attributes: [\r\n          {\r\n            trait_type: 'title',\r\n            value: form.title,\r\n          },\r\n          {\r\n            trait_type: 'category',\r\n            value: form.category,\r\n          },\r\n          {\r\n            trait_type: 'contentType',\r\n            value: form.contentType,\r\n          },\r\n          {\r\n            trait_type: 'contentUrl',\r\n            value: form.contentUrl,\r\n          },\r\n        ],\r\n        contentUrl: form.contentUrl,\r\n        protected: form.protected,\r\n      }\r\n      if (form.language) {\r\n        metaJson.language = form.language\r\n      }\r\n      if (form.prompt) {\r\n        metaJson.prompt = form.prompt\r\n      }\r\n      return metaJson\r\n      // return new Promise((resolve, reject) => {\r\n      //   uploadJson(metaJson)\r\n      //     .then((r) => {\r\n      //       if (r.code == 1) {\r\n      //         resolve(r.data.url)\r\n      //       } else {\r\n      //         reject(r.message)\r\n      //       }\r\n      //     })\r\n      //     .catch((e) => {\r\n      //       console.log(e)\r\n      //       reject(e.message ? e.message : e)\r\n      //     })\r\n      // })\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.create-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  .step-container {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-top: 62px;\r\n\r\n    .step {\r\n      text-align: left;\r\n\r\n      .step-title {\r\n        font-size: 19px;\r\n        font-family: Source Han Sans CN;\r\n        font-weight: bold;\r\n        color: #747c7c;\r\n      }\r\n\r\n      .step-sub {\r\n        font-size: 12px;\r\n        font-family: Source Han Sans CN;\r\n        font-weight: 400;\r\n        color: #747c7c;\r\n        margin-top: 10px;\r\n      }\r\n    }\r\n\r\n    .step-light {\r\n      .step-title {\r\n        font-size: 19px;\r\n        font-family: Source Han Sans CN;\r\n        font-weight: bold;\r\n        color: #4cc9ce;\r\n        background: linear-gradient(-16deg, #4195f6 0%, #00f9e5 100%);\r\n        -webkit-background-clip: text;\r\n        -webkit-text-fill-color: transparent;\r\n      }\r\n\r\n      .step-sub {\r\n        font-size: 12px;\r\n        font-family: Source Han Sans CN;\r\n        font-weight: 400;\r\n        color: #50ced5;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Update.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Update.vue?vue&type=template&id=fea11674&scoped=true\"\nimport script from \"./Update.vue?vue&type=script&lang=js\"\nexport * from \"./Update.vue?vue&type=script&lang=js\"\nimport style0 from \"./Update.vue?vue&type=style&index=0&id=fea11674&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fea11674\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","loadComplete","step","attrs","metadata","on","handleUpdate1","backClick","_e","handleUpdate2","ref","updateTxJson","staticRenderFns","show","$event","staticStyle","require","_v","tx","events","_s","transactionHash","name","props","type","Object","default","undefined","to","Authorised","returnValues","tokenId","data","methods","showDialog","component","components","CreateStep1","CreateStep2","UpdateSuccess","ipfsData","tokenSupplyInfo","tokenMetaUrl","tokenOwner","mounted","$route","query","loadingInstance","$loading","background","setTimeout","Promise","all","getOwner","loadSupplyInfo","loadMetadata","then","isVoting","$toast","warning","$t","$router","back","toLowerCase","$store","state","user","account","maxSupply","initialQuantity","currentSupply","availableSupply","initialPrice","weiToMbd","price","catch","e","console","log","finally","close","resolve","reject","getTokenOwner","owner","tokensData","res","tokenURI","uri","loadFromUrl","r","status","statusText","meta","title","description","image","contentType","category","contentUrl","protected","language","prompt","keyword","loadOpenContent","loadProtectedContent","openContent","protectedContent","url","unlockContent","code","message","ipfsUrl","form","initialPriceUpdate","availableSupplyUpdate","startSetTokenPrice","$refs","metaJson","makeURI","uploadJson","metaUrl","startSetTokenURI","attributes","trait_type","value"],"sourceRoot":""}